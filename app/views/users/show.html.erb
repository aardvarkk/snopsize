<script>
$(document).ready(reloadSnopsTable)

function reloadSnopsTable()
{
  $('#snops').dataTable( {
    "bFilter": false, 
    "bJQueryUI": true,
    "aaSorting": [],
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": $("#snops").data("source"),
    "sPaginationType": "full_numbers"
    });
}
</script>

<h1>User: <%=@user.username%> </h1>

<!-- We're only going to show these buttons if the user 
     singed in and on their own page -->
<% if auth_signed_in? && @user == current_auth %>
  <div id='editing'>
    <%= link_to 'Add Category', new_user_category_path %> | 
    <%= link_to 'New Snop', new_snop_path %>
  </div>
<% end %>
  
<%# A single snop is shown in the right column, with the ability to browse %>
<% if @snops %>
  <div id="snops_list_view">
    <%= render partial: 'shared/snop_list_view', locals: {snops: @snops, show_category: true} %>
  </div>
  <div id="snops_browse_view">
    <%= render partial: 'shared/snop_browse', locals: {current_snop: @snops.first, snop_list: @snops, show_category: true} %>
  </div>
<% end %>
