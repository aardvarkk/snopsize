<%# We set this variable for home.js.coffee to check %>
<%= javascript_tag do %>
  browseView = <%= params[:browse_view] %>
<% end %>

<%# The home page contains a sign-up button %>
<% content_for :sign_up_button do %>
  <% unless user_signed_in? %>
    <div class="undernav">          
      <%= link_to "Sign Up Now!", new_user_registration_path, class: "largebutton" %>
    </div><!--close undernav; this box is required to push the button over to line up correctly-->
  <% end %>
<% end %>

<%= render template: 'search/search' %>

<%# Partial to switch between the Snop flow and list view %>
<%= render partial: 'shared/list_flow_buttons' %>

<%# Only show the next/prev buttons if we're in browse view %>
<% content_for :tools_short do %>
  <div class="tools short">
    <div class="nav-arrows">
      <%= content_tag :div, nil, { class: "arrow prev", id: "prev" } %>
      <%= content_tag :div, nil, { class: "arrow next", id: "next" } %>
    </div><!--close arrows-->
  </div><!--close tools short-->
<% end %>

<% content_for :sidenav do %>
  <%= render partial: 'shared/sidenav_snop_browse', locals: { current_snop: @snops.first, snop_list: @snops } %>
<% end %>

<%# Render both views. The partial will choose which one to show based on params[:browse_view] %>
<%= render partial: 'shared/snop_all_views', locals: {snops: @snops, data_source: root_path(format: "json")} %>
