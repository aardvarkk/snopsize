// We want to update the datatable
var datatable = $("#snops").dataTable();
datatable.fnDraw();

// some vars for new snops that need to be shown
var new_snop = null;
var new_sidenav = null;

if (hasNext())
{
  // set current snop as the next one
  new_snop = $(".snop.current").next();
  new_sidenav = $(".sidenav.current").next();
}
else if (hasPrev())
{
  // set current snop as the prev one
  new_snop = $(".snop.current").prev();
  new_sidenav = $(".sidenav.current").prev();
}
else
{
  changeToListView();
}

// remove the snop view
var div_to_delete = "<%= '#snop_' + @snop.id.to_s %>";
$(div_to_delete).remove();

// remove the side nav
div_to_delete = "<%= '#' + @snop.id.to_s %>";
$(div_to_delete).remove();

// set the current snop
if (new_snop)
{
  setCurrentSnop(new_sidenav.attr("id"));
}

reloadClickHandlers();
reloadSocialMediaButtons();