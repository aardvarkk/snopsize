<!DOCTYPE html>
<html>
<head>
  <title>Snopsize</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application", controller_name if Snopsize::Application.assets.find_asset("#{controller.controller_name}.js")%>
  <%= csrf_meta_tags %>
</head>
<body>

  <%# This was recommended by devise %>
  <p class="notice"><%= notice %></p>
  <p class="alert"><%= alert %></p>

  <%# Title %>
  <h1>Snopsize</h1>

  <%# User navigation at the top of the page %>
  <div id="user_nav">
  <%= link_to_unless_current 'Create a Snop', new_snop_path %> |
  <% if user_signed_in? %>
    <%= link_to_unless_current "My Snops", current_user %> | 
    <%= link_to_unless_current "My Favourites", user_favourites_path(current_user) %> | 
    Signed in as <%= current_user.username %> | 
    <%= link_to_unless_current "Sign Out", destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to_unless_current "Sign In", new_user_session_path %> | 
    <%= link_to_unless_current "Sign Up", new_user_registration_path %>
  <% end %>
  </div>

  <%# Search form %>
  <%= form_tag("/search", :method => "get") do %>
    <%= label_tag(:q, "Search for:") %>
    <%= select_tag(:type, options_for_select([['Keyword', 'keyword'], ['URL', 'url'], ['User', 'user']], params[:type])) %>
    <%= text_field_tag(:q) %>
    <%# set the name to 'nil' to avoid the commit = Search parameter from being passed %>
    <%= submit_tag("Search", :name => nil) %>
  <% end %>

  <%# Content %>
  <%= yield %>

<%# General Site Navigation %>
<br/>
<div id="bottom_nav">
<br/>
  <center>
    <%= link_to_unless_current "Home", root_path %> | 
    <%= link_to_unless_current "About", about_path %> | 
    <%= link_to_unless_current "Help", help_path %> | 
    <%= mail_to('support@snopsize.com', 'Contact', subject: 'Support Question', encode: 'javascript') %>
  </center>
</div>

</body>
</html>
