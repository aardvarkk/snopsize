<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Snopsize</title>
  <meta name="description" content="Snopsize ..." />
  <meta name="keywords" content="Snopsize">

  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="image_src" href="/snopsize.jpg" />

  <%= javascript_include_tag "application" %>
  <%= javascript_include_tag controller_name if Snopsize::Application.assets.find_asset("#{controller.controller_name}.js")%>
  
  <%= csrf_meta_tags %>

  <%# Our internal style sheets %>
  <%= stylesheet_link_tag "application", :media => "all" %>

  <link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>

</head>

<body>
  <%# Scripts for Facebook Like Button %>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <%# Scripts for Twitter Button %>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  <div class="left">
    <header>
      <div id="menu">
        <%= link_to image_tag("snopsize.png", class: "logo"), root_path %>
        <nav>
          <ul id="navigation">
            <li><%= link_to t(:create_a_snop), new_snop_path, class: "create" %></li>
            <% if user_signed_in? %>
              <li><%= link_to t(:my_snops), current_user, class: "mysnops" %></li>
              <li><%= link_to t(:favourite_snops), user_favourites_path(current_user), class: "favourite" %></li>
              <li><%= link_to t(:sign_out) + ", " + current_user.username, destroy_user_session_path, method: :delete, class: "signin" %></li>
            <% else %>
              <li><%= link_to t(:sign_in), new_user_session_path, class: "signin" %></li>
            <% end %>
          </ul>

          <%# Our sign up button below the main left nav%>
          <%= yield :sign_up_button %>
        </nav>
      </div><!--close menu-->
    </header>

    <%# Fill in sidenav information in the view %>
    <%= yield :sidenav %>

  </div><!--close left-->

  <div class="flash">
    <% if alert %>
      <p id="notice"><%= alert %></p>
    <% elsif notice %>
      <p id="notice"><%= notice %></p>
    <% end %>
  </div>

  <div class="main">
    <div class="tools">
      <%# Search form %>
      <%= form_tag("/search", method: "get", class: "search_form") do %>
        <%= label_tag(:q, "Search:") %>
        <div class="dropdownholder">
          <%= select_tag(:type, options_for_select([['Keyword', 'keyword'], ['URL', 'url'], ['User', 'user']], params[:type]), class: "drop", id: "type", name: "type") %>
        </div>
        <%= text_field_tag(:q, nil, placeholder: t(:enter_words_to_search), class: "search") %>
        <%# set the name to 'nil' to avoid the commit = Search parameter from being passed %>
        <%= submit_tag("", { name: nil, class: "submit", id: 'searchbutton'} ) %>
      <% end %>        
      <ul id="toggle">
        <%= yield :list_flow_buttons %>
      </ul>
    </div><!--close tools-->

    <!--<p class="alert"><%= alert %></p>%>-->

    <%# Main Content %>
    <%= yield %>

  <%# Footer %>
  <footer>
    <div id="footer">
      <%= link_to "About Snopsize", about_path %>
      <%= mail_to('info@snopsize.com', 'Contact', subject: 'Snopsize', encode: 'javascript') %>
      <a href="http://twitter.com/snopsize" target="_blank">Twitter</a>
      <%= mail_to('info@taulabs.ca', 'Dev by Tau Labs', subject: 'Information Request', encode: 'javascript') %>
    </div><!--close footer-->
  </footer>

  </div><!--close main-->

</body>
</html>
